---
title: "Coral_Model"
author: "Sarah Morris & Lindsey Pekurny"
date: "10/14/2020"
output: html_document
---

**Part A**
**Our Consensus Flow Diagram**

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

knitr::include_graphics('/Users/sarahmorris/Desktop/MentalModeler__Model__[author]__2020-10-14_14_06_21.png')


```
**#3**
**Flow diagram for coral reef system**

#insert new model here
#Explain what mechanisms might explain which arrows point where in the flow diagram
#insert table with completed parameter descriptions

Number 3: Create a new flow chart and define variables
Note - Parrotfish CANNOT eat algal turf in this model

Variables

  a -> rate of macro-algae growth over coral
  gamma -> rate of macro-algae growth over algal turf
  d -> coral death rate
  r -> rate of coral growth of algal turf
  s -> ??
  
Parrot fish carrying capacity = K(C). K(C) = C, which is overall coral cover.


Number 4: Program the Model

-What do we want our model to show?
  Growth rates for all 4 organisms - can be plotted separately or all on one plot


```{r} 
### Copied code from problem 2. I am going to modify this.

require(deSolve)
## Loading required package: deSolve

## This first one is for coral. You can change the values as you like and see how coral's growth rate is influenced. I am confused on what 'state' does?

#C <- 1
#C <- as.numeric(C)
#R <- 100            ### R stands for algal turf
#R <- as.numeric(R)
#M <- 200
#M <- as.numeric(M)
state <- seq(C = 1)## I think 10 and 50 may be an equilibrium point
times <- seq(0,100,by=1)

# Parameters
parameters <- c(a = 0.1,g = 0.8, d = 0.44,r = 1, s = 0.49, M = 2000, R = 100)

# Model
coral <- function(t,state,parameters){
  with(as.list(c(state,parameters)),{
       dC <- (r*R*C) - (d*C) - (a*M*C)
      list(c(dC))   
  })}

# Solve model and plot results
out1 <- ode(y = state, times=times,func=coral,parms=parameters)
par(mfrow=c(1,1))
plot(out1[,1],out1[,2],ylab='Coral',xlab='time',las=1, pch = 19)

```

```{r}

### Probably just ignore this dumpster fire

C <- 1
C <- as.numeric(C)
R <- 100            ### R stands for algal turf
R <- as.numeric(R)
M <- 200
M <- as.numeric(M)
a <- 0.1
a <- as.numeric(a)
g <- 0.8
g <- as.numeric(g)
d <- 0.44
d <- as.numeric(d)
r <- 1
r <- as.numeric(r)

# Parameters
#parameters <- c(a = 0.1,g = 0.8, d = 0.44,r = 1, s = 0.49)

# Model
coral <- function(test){
  coral_pop <- (r*R*C) - (d*C) - (a*M*C)
    }

#plot(coral)

#plot(x = c(10,50),y=c(0,0),xlim=c(0,100))
curve(expr = coral, from = 0, to = 1,add=F)

# Solve model and plot results
#out1 <- ode(y = state, times=times,func=coral,parms=parameters)
#@par(mfrow=c(1,1))
#plot(out1[,1],out1[,2],ylab='Coral',xlab='time',las=1, pch = 19)

```

**#5**
#Produce figures and design analyses to address the following questions: 
**(a) What are the long-term dynamics of the system with the default parameters given below?**
**(b) What are the most important parameters in determining the long-term dynamics?**
